/*
 * Bandwidth
 *
 * Bandwidth's Communication APIs
 *
 * The version of the OpenAPI document: 1.0.0
 * Contact: letstalk@bandwidth.com
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */


using Xunit;

using System;
using System.Linq;
using System.IO;
using System.Collections.Generic;
using Bandwidth.Standard.Model;
using Bandwidth.Standard.Client;
using System.Reflection;
using Newtonsoft.Json;

namespace Bandwidth.Standard.Test.Unit.Model
{
    /// <summary>
    ///  Class for testing EndpointEvent
    /// </summary>
    public class EndpointEventTests : IDisposable
    {
        private EndpointEvent instance;

        public EndpointEventTests()
        {
            DateTime creationTime = new DateTime(2021, 1, 1, 0, 0, 0, DateTimeKind.Utc);
            DateTime expirationTime = new DateTime(2021, 1, 2, 0, 0, 0, DateTimeKind.Utc);
            DateTime eventTime = new DateTime(2021, 1, 1, 12, 0, 0, DateTimeKind.Utc);

            Device device = new Device(
                deviceId: "d-15ac29a2-1331029c-2cb0-4a07-b215-b22865662d85",
                deviceName: "Test Device",
                status: DeviceStatusEnum.CONNECTED,
                creationTimestamp: creationTime
            );

            instance = new EndpointEvent(
                endpointId: "e-15ac29a2-1331029c-2cb0-4a07-b215-b22865662d85",
                type: EndpointTypeEnum.WEBRTC,
                status: EndpointStatusEnum.CONNECTED,
                creationTimestamp: creationTime,
                expirationTimestamp: expirationTime,
                tag: "test-tag",
                eventTime: eventTime,
                eventType: EndpointEventTypeEnum.CONNECTED,
                device: device
            );
        }

        public void Dispose()
        {
            // Cleanup when everything is done.
        }

        /// <summary>
        /// Test an instance of EndpointEvent
        /// </summary>
        [Fact]
        public void EndpointEventInstanceTest()
        {
            Assert.IsType<EndpointEvent>(instance);
        }

        /// <summary>
        /// Test the property 'EndpointId'
        /// </summary>
        [Fact]
        public void EndpointIdTest()
        {
            Assert.IsType<string>(instance.EndpointId);
            Assert.Equal("e-15ac29a2-1331029c-2cb0-4a07-b215-b22865662d85", instance.EndpointId);
        }

        /// <summary>
        /// Test the property 'Type'
        /// </summary>
        [Fact]
        public void TypeTest()
        {
            Assert.IsType<EndpointTypeEnum>(instance.Type);
            Assert.Equal(EndpointTypeEnum.WEBRTC, instance.Type);
        }

        /// <summary>
        /// Test the property 'Status'
        /// </summary>
        [Fact]
        public void StatusTest()
        {
            Assert.IsType<EndpointStatusEnum>(instance.Status);
            Assert.Equal(EndpointStatusEnum.CONNECTED, instance.Status);
        }

        /// <summary>
        /// Test the property 'CreationTimestamp'
        /// </summary>
        [Fact]
        public void CreationTimestampTest()
        {
            Assert.IsType<DateTime>(instance.CreationTimestamp);
            Assert.Equal(new DateTime(2021, 1, 1, 0, 0, 0, DateTimeKind.Utc), instance.CreationTimestamp);
        }

        /// <summary>
        /// Test the property 'ExpirationTimestamp'
        /// </summary>
        [Fact]
        public void ExpirationTimestampTest()
        {
            Assert.IsType<DateTime>(instance.ExpirationTimestamp);
            Assert.Equal(new DateTime(2021, 1, 2, 0, 0, 0, DateTimeKind.Utc), instance.ExpirationTimestamp);
        }

        /// <summary>
        /// Test the property 'Tag'
        /// </summary>
        [Fact]
        public void TagTest()
        {
            Assert.IsType<string>(instance.Tag);
            Assert.Equal("test-tag", instance.Tag);
        }

        /// <summary>
        /// Test the property 'EventTime'
        /// </summary>
        [Fact]
        public void EventTimeTest()
        {
            Assert.IsType<DateTime>(instance.EventTime);
            Assert.Equal(new DateTime(2021, 1, 1, 12, 0, 0, DateTimeKind.Utc), instance.EventTime);
        }

        /// <summary>
        /// Test the property 'EventType'
        /// </summary>
        [Fact]
        public void EventTypeTest()
        {
            Assert.IsType<EndpointEventTypeEnum>(instance.EventType);
            Assert.Equal(EndpointEventTypeEnum.CONNECTED, instance.EventType);
        }

        /// <summary>
        /// Test the property 'Device'
        /// </summary>
        [Fact]
        public void DeviceTest()
        {
            Assert.IsType<Device>(instance.Device);
            Assert.NotNull(instance.Device);
            Assert.Equal("d-15ac29a2-1331029c-2cb0-4a07-b215-b22865662d85", instance.Device.DeviceId);
        }

        /// <summary>
        /// Test that EndpointId is required
        /// </summary>
        [Fact]
        public void EndpointIdRequiredTest()
        {
            DateTime creationTime = new DateTime(2021, 1, 1, 0, 0, 0, DateTimeKind.Utc);
            DateTime expirationTime = new DateTime(2021, 1, 2, 0, 0, 0, DateTimeKind.Utc);
            DateTime eventTime = new DateTime(2021, 1, 1, 12, 0, 0, DateTimeKind.Utc);

            Assert.Throws<ArgumentNullException>(() => new EndpointEvent(
                endpointId: null,
                type: EndpointTypeEnum.WEBRTC,
                status: EndpointStatusEnum.CONNECTED,
                creationTimestamp: creationTime,
                expirationTimestamp: expirationTime,
                eventTime: eventTime,
                eventType: EndpointEventTypeEnum.CONNECTED
            ));
        }

        /// <summary>
        /// Test EndpointEvent with DISCONNECTED event type
        /// </summary>
        [Fact]
        public void DisconnectedEventTypeTest()
        {
            DateTime creationTime = new DateTime(2021, 1, 1, 0, 0, 0, DateTimeKind.Utc);
            DateTime expirationTime = new DateTime(2021, 1, 2, 0, 0, 0, DateTimeKind.Utc);
            DateTime eventTime = new DateTime(2021, 1, 1, 12, 0, 0, DateTimeKind.Utc);

            EndpointEvent disconnectedEvent = new EndpointEvent(
                endpointId: "e-test-123",
                type: EndpointTypeEnum.WEBRTC,
                status: EndpointStatusEnum.DISCONNECTED,
                creationTimestamp: creationTime,
                expirationTimestamp: expirationTime,
                eventTime: eventTime,
                eventType: EndpointEventTypeEnum.DISCONNECTED
            );

            Assert.Equal(EndpointEventTypeEnum.DISCONNECTED, disconnectedEvent.EventType);
            Assert.Equal(EndpointStatusEnum.DISCONNECTED, disconnectedEvent.Status);
        }

        /// <summary>
        /// Test EndpointEvent without optional tag
        /// </summary>
        [Fact]
        public void EndpointEventWithoutTagTest()
        {
            DateTime creationTime = new DateTime(2021, 1, 1, 0, 0, 0, DateTimeKind.Utc);
            DateTime expirationTime = new DateTime(2021, 1, 2, 0, 0, 0, DateTimeKind.Utc);
            DateTime eventTime = new DateTime(2021, 1, 1, 12, 0, 0, DateTimeKind.Utc);

            EndpointEvent eventWithoutTag = new EndpointEvent(
                endpointId: "e-test-456",
                type: EndpointTypeEnum.WEBRTC,
                status: EndpointStatusEnum.CONNECTED,
                creationTimestamp: creationTime,
                expirationTimestamp: expirationTime,
                eventTime: eventTime,
                eventType: EndpointEventTypeEnum.CONNECTED
            );

            Assert.Null(eventWithoutTag.Tag);
        }

        /// <summary>
        /// Test EndpointEvent without optional device
        /// </summary>
        [Fact]
        public void EndpointEventWithoutDeviceTest()
        {
            DateTime creationTime = new DateTime(2021, 1, 1, 0, 0, 0, DateTimeKind.Utc);
            DateTime expirationTime = new DateTime(2021, 1, 2, 0, 0, 0, DateTimeKind.Utc);
            DateTime eventTime = new DateTime(2021, 1, 1, 12, 0, 0, DateTimeKind.Utc);

            EndpointEvent eventWithoutDevice = new EndpointEvent(
                endpointId: "e-test-789",
                type: EndpointTypeEnum.WEBRTC,
                status: EndpointStatusEnum.CONNECTED,
                creationTimestamp: creationTime,
                expirationTimestamp: expirationTime,
                eventTime: eventTime,
                eventType: EndpointEventTypeEnum.CONNECTED
            );

            Assert.Null(eventWithoutDevice.Device);
        }

        /// <summary>
        /// Test JSON serialization of EndpointEvent
        /// </summary>
        [Fact]
        public void EndpointEventSerializationTest()
        {
            string json = instance.ToJson();
            Assert.NotNull(json);
            Assert.Contains("\"endpointId\"", json);
            Assert.Contains("\"eventType\"", json);
            Assert.Contains("e-15ac29a2-1331029c-2cb0-4a07-b215-b22865662d85", json);
        }

        /// <summary>
        /// Test JSON deserialization of EndpointEvent
        /// </summary>
        [Fact]
        public void EndpointEventDeserializationTest()
        {
            string json = @"{
                ""endpointId"": ""e-abc123"",
                ""type"": ""WEBRTC"",
                ""status"": ""CONNECTED"",
                ""creationTimestamp"": ""2021-01-01T00:00:00Z"",
                ""expirationTimestamp"": ""2021-01-02T00:00:00Z"",
                ""tag"": ""my-tag"",
                ""eventTime"": ""2021-01-01T12:00:00Z"",
                ""eventType"": ""DEVICE_CONNECTED""
            }";

            EndpointEvent deserializedEvent = JsonConvert.DeserializeObject<EndpointEvent>(json);

            Assert.NotNull(deserializedEvent);
            Assert.Equal("e-abc123", deserializedEvent.EndpointId);
            Assert.Equal(EndpointTypeEnum.WEBRTC, deserializedEvent.Type);
            Assert.Equal(EndpointStatusEnum.CONNECTED, deserializedEvent.Status);
            Assert.Equal("my-tag", deserializedEvent.Tag);
            Assert.Equal(EndpointEventTypeEnum.CONNECTED, deserializedEvent.EventType);
        }

        /// <summary>
        /// Test ToString method
        /// </summary>
        [Fact]
        public void ToStringTest()
        {
            string result = instance.ToString();
            Assert.NotNull(result);
            Assert.Contains("class EndpointEvent", result);
            Assert.Contains("EndpointId:", result);
            Assert.Contains("EventType:", result);
            Assert.Contains("e-15ac29a2-1331029c-2cb0-4a07-b215-b22865662d85", result);
        }
    }
}
