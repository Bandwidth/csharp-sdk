// <auto-generated>
/*
 * Bandwidth
 *
 * Bandwidth's Communication APIs
 *
 * The version of the OpenAPI document: 1.0.0
 * Contact: letstalk@bandwidth.com
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

using System;
using System.Collections;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;
using System.Text.Json;
using System.Text.Json.Serialization;
using System.ComponentModel.DataAnnotations;
using Bandwidth.Standard.Client;

namespace Bandwidth.Standard.Model
{
    /// <summary>
    /// Represents a status callback for an outbound MT SMS or MMS or RBM message.
    /// </summary>
    public partial class StatusCallback : IValidatableObject
    {
        /// <summary>
        /// Initializes a new instance of the <see cref="StatusCallback" /> class.
        /// </summary>
        /// <param name="time">time</param>
        /// <param name="type">type</param>
        /// <param name="to">The destination phone number the message was sent to. For status callbacks, this the the Bandwidth user&#39;s client phone number.</param>
        /// <param name="description">A detailed description of the event described by the callback.</param>
        /// <param name="message">message</param>
        /// <param name="eventTime">Represents the time at which the message was read, for &#x60;message-read&#x60; callbacks.</param>
        /// <param name="errorCode">Optional error code, applicable only when type is &#x60;message-failed&#x60;.</param>
        /// <param name="carrierName">The name of the Authorized Message Provider (AMP) that handled this message. In the US, this is the carrier that the message was sent to. This field is present only when this account feature has been enabled.</param>
        [JsonConstructor]
        public StatusCallback(DateTime time, StatusCallbackTypeEnum type, string to, string description, StatusCallbackMessage message, Option<DateTime?> eventTime = default, Option<int?> errorCode = default, Option<string> carrierName = default)
        {
            Time = time;
            Type = type;
            To = to;
            Description = description;
            Message = message;
            EventTimeOption = eventTime;
            ErrorCodeOption = errorCode;
            CarrierNameOption = carrierName;
            OnCreated();
        }

        partial void OnCreated();

        /// <summary>
        /// Gets or Sets Type
        /// </summary>
        [JsonPropertyName("type")]
        public StatusCallbackTypeEnum Type { get; set; }

        /// <summary>
        /// Gets or Sets Time
        /// </summary>
        /* <example>2024-12-02T20:15:57.278Z</example> */
        [JsonPropertyName("time")]
        public DateTime Time { get; set; }

        /// <summary>
        /// The destination phone number the message was sent to. For status callbacks, this the the Bandwidth user&#39;s client phone number.
        /// </summary>
        /// <value>The destination phone number the message was sent to. For status callbacks, this the the Bandwidth user&#39;s client phone number.</value>
        /* <example>+15552223333</example> */
        [JsonPropertyName("to")]
        public string To { get; set; }

        /// <summary>
        /// A detailed description of the event described by the callback.
        /// </summary>
        /// <value>A detailed description of the event described by the callback.</value>
        /* <example>Message delivered to carrier.</example> */
        [JsonPropertyName("description")]
        public string Description { get; set; }

        /// <summary>
        /// Gets or Sets Message
        /// </summary>
        [JsonPropertyName("message")]
        public StatusCallbackMessage Message { get; set; }

        /// <summary>
        /// Used to track the state of EventTime
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<DateTime?> EventTimeOption { get; private set; }

        /// <summary>
        /// Represents the time at which the message was read, for &#x60;message-read&#x60; callbacks.
        /// </summary>
        /// <value>Represents the time at which the message was read, for &#x60;message-read&#x60; callbacks.</value>
        /* <example>2024-12-02T20:15:58.278Z</example> */
        [JsonPropertyName("eventTime")]
        public DateTime? EventTime { get { return this.EventTimeOption; } set { this.EventTimeOption = new Option<DateTime?>(value); } }

        /// <summary>
        /// Used to track the state of ErrorCode
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<int?> ErrorCodeOption { get; private set; }

        /// <summary>
        /// Optional error code, applicable only when type is &#x60;message-failed&#x60;.
        /// </summary>
        /// <value>Optional error code, applicable only when type is &#x60;message-failed&#x60;.</value>
        /* <example>4405</example> */
        [JsonPropertyName("errorCode")]
        public int? ErrorCode { get { return this.ErrorCodeOption; } set { this.ErrorCodeOption = new Option<int?>(value); } }

        /// <summary>
        /// Used to track the state of CarrierName
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<string> CarrierNameOption { get; private set; }

        /// <summary>
        /// The name of the Authorized Message Provider (AMP) that handled this message. In the US, this is the carrier that the message was sent to. This field is present only when this account feature has been enabled.
        /// </summary>
        /// <value>The name of the Authorized Message Provider (AMP) that handled this message. In the US, this is the carrier that the message was sent to. This field is present only when this account feature has been enabled.</value>
        /* <example>AT&amp;T</example> */
        [JsonPropertyName("carrierName")]
        public string CarrierName { get { return this.CarrierNameOption; } set { this.CarrierNameOption = new Option<string>(value); } }

        /// <summary>
        /// Returns the string presentation of the object
        /// </summary>
        /// <returns>String presentation of the object</returns>
        public override string ToString()
        {
            StringBuilder sb = new StringBuilder();
            sb.Append("class StatusCallback {\n");
            sb.Append("  Time: ").Append(Time).Append("\n");
            sb.Append("  Type: ").Append(Type).Append("\n");
            sb.Append("  To: ").Append(To).Append("\n");
            sb.Append("  Description: ").Append(Description).Append("\n");
            sb.Append("  Message: ").Append(Message).Append("\n");
            sb.Append("  EventTime: ").Append(EventTime).Append("\n");
            sb.Append("  ErrorCode: ").Append(ErrorCode).Append("\n");
            sb.Append("  CarrierName: ").Append(CarrierName).Append("\n");
            sb.Append("}\n");
            return sb.ToString();
        }

        /// <summary>
        /// To validate all properties of the instance
        /// </summary>
        /// <param name="validationContext">Validation context</param>
        /// <returns>Validation Result</returns>
        IEnumerable<ValidationResult> IValidatableObject.Validate(ValidationContext validationContext)
        {
            yield break;
        }
    }

    /// <summary>
    /// A Json converter for type <see cref="StatusCallback" />
    /// </summary>
    public class StatusCallbackJsonConverter : JsonConverter<StatusCallback>
    {
        /// <summary>
        /// The format to use to serialize Time
        /// </summary>
        public static string TimeFormat { get; set; } = "yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fffffffK";

        /// <summary>
        /// The format to use to serialize EventTime
        /// </summary>
        public static string EventTimeFormat { get; set; } = "yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fffffffK";

        /// <summary>
        /// Deserializes json to <see cref="StatusCallback" />
        /// </summary>
        /// <param name="utf8JsonReader"></param>
        /// <param name="typeToConvert"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <returns></returns>
        /// <exception cref="JsonException"></exception>
        public override StatusCallback Read(ref Utf8JsonReader utf8JsonReader, Type typeToConvert, JsonSerializerOptions jsonSerializerOptions)
        {
            int currentDepth = utf8JsonReader.CurrentDepth;

            if (utf8JsonReader.TokenType != JsonTokenType.StartObject && utf8JsonReader.TokenType != JsonTokenType.StartArray)
                throw new JsonException();

            JsonTokenType startingTokenType = utf8JsonReader.TokenType;

            Option<DateTime?> time = default;
            Option<StatusCallbackTypeEnum?> type = default;
            Option<string> to = default;
            Option<string> description = default;
            Option<StatusCallbackMessage> message = default;
            Option<DateTime?> eventTime = default;
            Option<int?> errorCode = default;
            Option<string> carrierName = default;

            while (utf8JsonReader.Read())
            {
                if (startingTokenType == JsonTokenType.StartObject && utf8JsonReader.TokenType == JsonTokenType.EndObject && currentDepth == utf8JsonReader.CurrentDepth)
                    break;

                if (startingTokenType == JsonTokenType.StartArray && utf8JsonReader.TokenType == JsonTokenType.EndArray && currentDepth == utf8JsonReader.CurrentDepth)
                    break;

                if (utf8JsonReader.TokenType == JsonTokenType.PropertyName && currentDepth == utf8JsonReader.CurrentDepth - 1)
                {
                    string localVarJsonPropertyName = utf8JsonReader.GetString();
                    utf8JsonReader.Read();

                    switch (localVarJsonPropertyName)
                    {
                        case "time":
                            time = new Option<DateTime?>(JsonSerializer.Deserialize<DateTime>(ref utf8JsonReader, jsonSerializerOptions));
                            break;
                        case "type":
                            string typeRawValue = utf8JsonReader.GetString();
                            if (typeRawValue != null)
                                type = new Option<StatusCallbackTypeEnum?>(StatusCallbackTypeEnumValueConverter.FromStringOrDefault(typeRawValue));
                            break;
                        case "to":
                            to = new Option<string>(utf8JsonReader.GetString());
                            break;
                        case "description":
                            description = new Option<string>(utf8JsonReader.GetString());
                            break;
                        case "message":
                            message = new Option<StatusCallbackMessage>(JsonSerializer.Deserialize<StatusCallbackMessage>(ref utf8JsonReader, jsonSerializerOptions));
                            break;
                        case "eventTime":
                            eventTime = new Option<DateTime?>(JsonSerializer.Deserialize<DateTime>(ref utf8JsonReader, jsonSerializerOptions));
                            break;
                        case "errorCode":
                            errorCode = new Option<int?>(utf8JsonReader.TokenType == JsonTokenType.Null ? (int?)null : utf8JsonReader.GetInt32());
                            break;
                        case "carrierName":
                            carrierName = new Option<string>(utf8JsonReader.GetString());
                            break;
                        default:
                            break;
                    }
                }
            }

            if (!time.IsSet)
                throw new ArgumentException("Property is required for class StatusCallback.", nameof(time));

            if (!type.IsSet)
                throw new ArgumentException("Property is required for class StatusCallback.", nameof(type));

            if (!to.IsSet)
                throw new ArgumentException("Property is required for class StatusCallback.", nameof(to));

            if (!description.IsSet)
                throw new ArgumentException("Property is required for class StatusCallback.", nameof(description));

            if (!message.IsSet)
                throw new ArgumentException("Property is required for class StatusCallback.", nameof(message));

            if (time.IsSet && time.Value == null)
                throw new ArgumentNullException(nameof(time), "Property is not nullable for class StatusCallback.");

            if (type.IsSet && type.Value == null)
                throw new ArgumentNullException(nameof(type), "Property is not nullable for class StatusCallback.");

            if (to.IsSet && to.Value == null)
                throw new ArgumentNullException(nameof(to), "Property is not nullable for class StatusCallback.");

            if (description.IsSet && description.Value == null)
                throw new ArgumentNullException(nameof(description), "Property is not nullable for class StatusCallback.");

            if (message.IsSet && message.Value == null)
                throw new ArgumentNullException(nameof(message), "Property is not nullable for class StatusCallback.");

            if (eventTime.IsSet && eventTime.Value == null)
                throw new ArgumentNullException(nameof(eventTime), "Property is not nullable for class StatusCallback.");

            if (errorCode.IsSet && errorCode.Value == null)
                throw new ArgumentNullException(nameof(errorCode), "Property is not nullable for class StatusCallback.");

            if (carrierName.IsSet && carrierName.Value == null)
                throw new ArgumentNullException(nameof(carrierName), "Property is not nullable for class StatusCallback.");

            return new StatusCallback(time.Value.Value, type.Value.Value, to.Value, description.Value, message.Value, eventTime, errorCode, carrierName);
        }

        /// <summary>
        /// Serializes a <see cref="StatusCallback" />
        /// </summary>
        /// <param name="writer"></param>
        /// <param name="statusCallback"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <exception cref="NotImplementedException"></exception>
        public override void Write(Utf8JsonWriter writer, StatusCallback statusCallback, JsonSerializerOptions jsonSerializerOptions)
        {
            writer.WriteStartObject();

            WriteProperties(writer, statusCallback, jsonSerializerOptions);
            writer.WriteEndObject();
        }

        /// <summary>
        /// Serializes the properties of <see cref="StatusCallback" />
        /// </summary>
        /// <param name="writer"></param>
        /// <param name="statusCallback"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <exception cref="NotImplementedException"></exception>
        public void WriteProperties(Utf8JsonWriter writer, StatusCallback statusCallback, JsonSerializerOptions jsonSerializerOptions)
        {
            if (statusCallback.To == null)
                throw new ArgumentNullException(nameof(statusCallback.To), "Property is required for class StatusCallback.");

            if (statusCallback.Description == null)
                throw new ArgumentNullException(nameof(statusCallback.Description), "Property is required for class StatusCallback.");

            if (statusCallback.Message == null)
                throw new ArgumentNullException(nameof(statusCallback.Message), "Property is required for class StatusCallback.");

            if (statusCallback.CarrierNameOption.IsSet && statusCallback.CarrierName == null)
                throw new ArgumentNullException(nameof(statusCallback.CarrierName), "Property is required for class StatusCallback.");

            writer.WriteString("time", statusCallback.Time.ToString(TimeFormat));

            var typeRawValue = StatusCallbackTypeEnumValueConverter.ToJsonValue(statusCallback.Type);
            writer.WriteString("type", typeRawValue);

            writer.WriteString("to", statusCallback.To);

            writer.WriteString("description", statusCallback.Description);

            writer.WritePropertyName("message");
            JsonSerializer.Serialize(writer, statusCallback.Message, jsonSerializerOptions);
            if (statusCallback.EventTimeOption.IsSet)
                writer.WriteString("eventTime", statusCallback.EventTimeOption.Value.Value.ToString(EventTimeFormat));

            if (statusCallback.ErrorCodeOption.IsSet)
                writer.WriteNumber("errorCode", statusCallback.ErrorCodeOption.Value.Value);

            if (statusCallback.CarrierNameOption.IsSet)
                writer.WriteString("carrierName", statusCallback.CarrierName);
        }
    }
}
