/*
 * Bandwidth
 *
 * Bandwidth's Communication APIs
 *
 * The version of the OpenAPI document: 1.0.0
 * Contact: letstalk@bandwidth.com
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text.Json;
using System.Text.Json.Serialization;
using System.Net.Http;
using Microsoft.Extensions.DependencyInjection;
using Bandwidth.Standard.Api;
using Bandwidth.Standard.Model;

namespace Bandwidth.Standard.Client
{
    /// <summary>
    /// Provides hosting configuration for Bandwidth.Standard
    /// </summary>
    public class HostConfiguration
    {
        private readonly IServiceCollection _services;
        private readonly JsonSerializerOptions _jsonOptions = new JsonSerializerOptions();

        internal bool HttpClientsAdded { get; private set; }

        /// <summary>
        /// Instantiates the class 
        /// </summary>
        /// <param name="services"></param>
        public HostConfiguration(IServiceCollection services)
        {
            _services = services;
            _jsonOptions.Converters.Add(new JsonStringEnumConverter());
            _jsonOptions.Converters.Add(new DateTimeJsonConverter());
            _jsonOptions.Converters.Add(new DateTimeNullableJsonConverter());
            _jsonOptions.Converters.Add(new AccountStatisticsJsonConverter());
            _jsonOptions.Converters.Add(new AdditionalDenialReasonJsonConverter());
            _jsonOptions.Converters.Add(new AddressJsonConverter());
            _jsonOptions.Converters.Add(new AnswerCallbackJsonConverter());
            _jsonOptions.Converters.Add(new AsyncLookupRequestJsonConverter());
            _jsonOptions.Converters.Add(new BlockedWebhookJsonConverter());
            _jsonOptions.Converters.Add(new BridgeCompleteCallbackJsonConverter());
            _jsonOptions.Converters.Add(new BridgeTargetCompleteCallbackJsonConverter());
            _jsonOptions.Converters.Add(new BusinessEntityTypeEnumJsonConverter());
            _jsonOptions.Converters.Add(new BusinessEntityTypeEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new BusinessRegistrationTypeEnumJsonConverter());
            _jsonOptions.Converters.Add(new BusinessRegistrationTypeEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new CallDirectionEnumJsonConverter());
            _jsonOptions.Converters.Add(new CallDirectionEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new CallRecordingMetadataJsonConverter());
            _jsonOptions.Converters.Add(new CallStateJsonConverter());
            _jsonOptions.Converters.Add(new CallStateEnumJsonConverter());
            _jsonOptions.Converters.Add(new CallStateEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new CallTranscriptionJsonConverter());
            _jsonOptions.Converters.Add(new CallTranscriptionDetectedLanguageEnumJsonConverter());
            _jsonOptions.Converters.Add(new CallTranscriptionDetectedLanguageEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new CallTranscriptionMetadataJsonConverter());
            _jsonOptions.Converters.Add(new CallTranscriptionResponseJsonConverter());
            _jsonOptions.Converters.Add(new CallTranscriptionTrackEnumJsonConverter());
            _jsonOptions.Converters.Add(new CallTranscriptionTrackEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new CallbackJsonConverter());
            _jsonOptions.Converters.Add(new CallbackMethodEnumJsonConverter());
            _jsonOptions.Converters.Add(new CallbackMethodEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new CardWidthEnumJsonConverter());
            _jsonOptions.Converters.Add(new CardWidthEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new CodeRequestJsonConverter());
            _jsonOptions.Converters.Add(new CompletedLookupStatusEnumJsonConverter());
            _jsonOptions.Converters.Add(new CompletedLookupStatusEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new ConferenceJsonConverter());
            _jsonOptions.Converters.Add(new ConferenceCompletedCallbackJsonConverter());
            _jsonOptions.Converters.Add(new ConferenceCreatedCallbackJsonConverter());
            _jsonOptions.Converters.Add(new ConferenceMemberJsonConverter());
            _jsonOptions.Converters.Add(new ConferenceMemberExitCallbackJsonConverter());
            _jsonOptions.Converters.Add(new ConferenceMemberJoinCallbackJsonConverter());
            _jsonOptions.Converters.Add(new ConferenceRecordingAvailableCallbackJsonConverter());
            _jsonOptions.Converters.Add(new ConferenceRecordingMetadataJsonConverter());
            _jsonOptions.Converters.Add(new ConferenceRedirectCallbackJsonConverter());
            _jsonOptions.Converters.Add(new ConferenceStateEnumJsonConverter());
            _jsonOptions.Converters.Add(new ConferenceStateEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new ContactJsonConverter());
            _jsonOptions.Converters.Add(new CreateAsyncBulkLookupResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateAsyncBulkLookupResponseDataJsonConverter());
            _jsonOptions.Converters.Add(new CreateCallJsonConverter());
            _jsonOptions.Converters.Add(new CreateCallResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateEndpointRequestBaseJsonConverter());
            _jsonOptions.Converters.Add(new CreateEndpointResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateEndpointResponseObjectJsonConverter());
            _jsonOptions.Converters.Add(new CreateMessageRequestErrorJsonConverter());
            _jsonOptions.Converters.Add(new CreateMultiChannelMessageResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateSyncLookupResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateSyncLookupResponseDataJsonConverter());
            _jsonOptions.Converters.Add(new CreateWebRtcConnectionRequestJsonConverter());
            _jsonOptions.Converters.Add(new DeactivationEventEnumJsonConverter());
            _jsonOptions.Converters.Add(new DeactivationEventEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new DeviceJsonConverter());
            _jsonOptions.Converters.Add(new DeviceStatusEnumJsonConverter());
            _jsonOptions.Converters.Add(new DeviceStatusEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new DisconnectCallbackJsonConverter());
            _jsonOptions.Converters.Add(new DiversionJsonConverter());
            _jsonOptions.Converters.Add(new DtmfCallbackJsonConverter());
            _jsonOptions.Converters.Add(new EndpointJsonConverter());
            _jsonOptions.Converters.Add(new EndpointDirectionEnumJsonConverter());
            _jsonOptions.Converters.Add(new EndpointDirectionEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new EndpointEventJsonConverter());
            _jsonOptions.Converters.Add(new EndpointEventTypeEnumJsonConverter());
            _jsonOptions.Converters.Add(new EndpointEventTypeEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new EndpointResponseJsonConverter());
            _jsonOptions.Converters.Add(new EndpointStatusEnumJsonConverter());
            _jsonOptions.Converters.Add(new EndpointStatusEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new EndpointTypeEnumJsonConverter());
            _jsonOptions.Converters.Add(new EndpointTypeEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new EndpointsJsonConverter());
            _jsonOptions.Converters.Add(new ErrorJsonConverter());
            _jsonOptions.Converters.Add(new ErrorObjectJsonConverter());
            _jsonOptions.Converters.Add(new ErrorResponseJsonConverter());
            _jsonOptions.Converters.Add(new ErrorSourceJsonConverter());
            _jsonOptions.Converters.Add(new FailureWebhookJsonConverter());
            _jsonOptions.Converters.Add(new FieldErrorJsonConverter());
            _jsonOptions.Converters.Add(new FileFormatEnumJsonConverter());
            _jsonOptions.Converters.Add(new FileFormatEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new GatherCallbackJsonConverter());
            _jsonOptions.Converters.Add(new GetAsyncBulkLookupResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetAsyncBulkLookupResponseDataJsonConverter());
            _jsonOptions.Converters.Add(new InProgressLookupStatusEnumJsonConverter());
            _jsonOptions.Converters.Add(new InProgressLookupStatusEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new InboundCallbackJsonConverter());
            _jsonOptions.Converters.Add(new InboundCallbackMessageJsonConverter());
            _jsonOptions.Converters.Add(new InboundCallbackTypeEnumJsonConverter());
            _jsonOptions.Converters.Add(new InboundCallbackTypeEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new InitiateCallbackJsonConverter());
            _jsonOptions.Converters.Add(new LatestMessageDeliveryStatusEnumJsonConverter());
            _jsonOptions.Converters.Add(new LatestMessageDeliveryStatusEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new LineTypeEnumJsonConverter());
            _jsonOptions.Converters.Add(new LineTypeEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new LinkJsonConverter());
            _jsonOptions.Converters.Add(new LinkSchemaJsonConverter());
            _jsonOptions.Converters.Add(new LinksObjectJsonConverter());
            _jsonOptions.Converters.Add(new ListEndpointsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListMessageDirectionEnumJsonConverter());
            _jsonOptions.Converters.Add(new ListMessageDirectionEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new ListMessageItemJsonConverter());
            _jsonOptions.Converters.Add(new LookupErrorResponseJsonConverter());
            _jsonOptions.Converters.Add(new LookupErrorSchemaJsonConverter());
            _jsonOptions.Converters.Add(new LookupErrorSchemaMetaJsonConverter());
            _jsonOptions.Converters.Add(new LookupResultJsonConverter());
            _jsonOptions.Converters.Add(new MachineDetectionCompleteCallbackJsonConverter());
            _jsonOptions.Converters.Add(new MachineDetectionConfigurationJsonConverter());
            _jsonOptions.Converters.Add(new MachineDetectionModeEnumJsonConverter());
            _jsonOptions.Converters.Add(new MachineDetectionModeEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new MachineDetectionResultJsonConverter());
            _jsonOptions.Converters.Add(new MediaJsonConverter());
            _jsonOptions.Converters.Add(new MessageJsonConverter());
            _jsonOptions.Converters.Add(new MessageDirectionEnumJsonConverter());
            _jsonOptions.Converters.Add(new MessageDirectionEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new MessageRequestJsonConverter());
            _jsonOptions.Converters.Add(new MessageStatusEnumJsonConverter());
            _jsonOptions.Converters.Add(new MessageStatusEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new MessageTypeEnumJsonConverter());
            _jsonOptions.Converters.Add(new MessageTypeEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new MessagesListJsonConverter());
            _jsonOptions.Converters.Add(new MessagingCodeResponseJsonConverter());
            _jsonOptions.Converters.Add(new MessagingRequestErrorJsonConverter());
            _jsonOptions.Converters.Add(new MfaForbiddenRequestErrorJsonConverter());
            _jsonOptions.Converters.Add(new MfaRequestErrorJsonConverter());
            _jsonOptions.Converters.Add(new MfaUnauthorizedRequestErrorJsonConverter());
            _jsonOptions.Converters.Add(new MmsMessageContentJsonConverter());
            _jsonOptions.Converters.Add(new MmsMessageContentFileJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelActionJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelActionCalendarEventJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelChannelListMMSObjectJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelChannelListMMSResponseObjectJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelChannelListObjectBaseJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelChannelListOwnerObjectJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelChannelListRBMObjectJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelChannelListRBMObjectAllOfContentJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelChannelListRBMResponseObjectJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelChannelListRequestObjectJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelChannelListResponseObjectJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelChannelListSMSObjectJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelChannelListSMSResponseObjectJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelErrorJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelMessageChannelEnumJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelMessageChannelEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelMessageContentJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelMessageRequestJsonConverter());
            _jsonOptions.Converters.Add(new MultiChannelMessageResponseDataJsonConverter());
            _jsonOptions.Converters.Add(new OptInWorkflowJsonConverter());
            _jsonOptions.Converters.Add(new PageJsonConverter());
            _jsonOptions.Converters.Add(new PageInfoJsonConverter());
            _jsonOptions.Converters.Add(new PriorityEnumJsonConverter());
            _jsonOptions.Converters.Add(new PriorityEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new ProductTypeEnumJsonConverter());
            _jsonOptions.Converters.Add(new ProductTypeEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new RbmActionBaseJsonConverter());
            _jsonOptions.Converters.Add(new RbmActionDialJsonConverter());
            _jsonOptions.Converters.Add(new RbmActionOpenUrlJsonConverter());
            _jsonOptions.Converters.Add(new RbmActionTypeEnumJsonConverter());
            _jsonOptions.Converters.Add(new RbmActionTypeEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new RbmActionViewLocationJsonConverter());
            _jsonOptions.Converters.Add(new RbmCardContentJsonConverter());
            _jsonOptions.Converters.Add(new RbmCardContentMediaJsonConverter());
            _jsonOptions.Converters.Add(new RbmLocationResponseJsonConverter());
            _jsonOptions.Converters.Add(new RbmMediaHeightEnumJsonConverter());
            _jsonOptions.Converters.Add(new RbmMediaHeightEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new RbmMessageCarouselCardJsonConverter());
            _jsonOptions.Converters.Add(new RbmMessageContentFileJsonConverter());
            _jsonOptions.Converters.Add(new RbmMessageContentRichCardJsonConverter());
            _jsonOptions.Converters.Add(new RbmMessageContentTextJsonConverter());
            _jsonOptions.Converters.Add(new RbmMessageMediaJsonConverter());
            _jsonOptions.Converters.Add(new RbmOpenUrlEnumJsonConverter());
            _jsonOptions.Converters.Add(new RbmOpenUrlEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new RbmStandaloneCardJsonConverter());
            _jsonOptions.Converters.Add(new RbmSuggestionResponseJsonConverter());
            _jsonOptions.Converters.Add(new RbmWebViewEnumJsonConverter());
            _jsonOptions.Converters.Add(new RbmWebViewEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new RecordingAvailableCallbackJsonConverter());
            _jsonOptions.Converters.Add(new RecordingCompleteCallbackJsonConverter());
            _jsonOptions.Converters.Add(new RecordingStateEnumJsonConverter());
            _jsonOptions.Converters.Add(new RecordingStateEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new RecordingTranscriptionMetadataJsonConverter());
            _jsonOptions.Converters.Add(new RecordingTranscriptionsJsonConverter());
            _jsonOptions.Converters.Add(new RedirectCallbackJsonConverter());
            _jsonOptions.Converters.Add(new RedirectMethodEnumJsonConverter());
            _jsonOptions.Converters.Add(new RedirectMethodEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new SipConnectionMetadataJsonConverter());
            _jsonOptions.Converters.Add(new SipCredentialsJsonConverter());
            _jsonOptions.Converters.Add(new SmsMessageContentJsonConverter());
            _jsonOptions.Converters.Add(new StandaloneCardOrientationEnumJsonConverter());
            _jsonOptions.Converters.Add(new StandaloneCardOrientationEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new StatusCallbackJsonConverter());
            _jsonOptions.Converters.Add(new StatusCallbackMessageJsonConverter());
            _jsonOptions.Converters.Add(new StatusCallbackTypeEnumJsonConverter());
            _jsonOptions.Converters.Add(new StatusCallbackTypeEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new StirShakenJsonConverter());
            _jsonOptions.Converters.Add(new SyncLookupRequestJsonConverter());
            _jsonOptions.Converters.Add(new TelephoneNumberJsonConverter());
            _jsonOptions.Converters.Add(new TfvBasicAuthenticationJsonConverter());
            _jsonOptions.Converters.Add(new TfvCallbackStatusEnumJsonConverter());
            _jsonOptions.Converters.Add(new TfvCallbackStatusEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new TfvErrorJsonConverter());
            _jsonOptions.Converters.Add(new TfvStatusJsonConverter());
            _jsonOptions.Converters.Add(new TfvStatusEnumJsonConverter());
            _jsonOptions.Converters.Add(new TfvStatusEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new TfvSubmissionInfoJsonConverter());
            _jsonOptions.Converters.Add(new TfvSubmissionWrapperJsonConverter());
            _jsonOptions.Converters.Add(new ThumbnailAlignmentEnumJsonConverter());
            _jsonOptions.Converters.Add(new ThumbnailAlignmentEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new TranscribeRecordingJsonConverter());
            _jsonOptions.Converters.Add(new TranscriptionJsonConverter());
            _jsonOptions.Converters.Add(new TranscriptionAvailableCallbackJsonConverter());
            _jsonOptions.Converters.Add(new TransferAnswerCallbackJsonConverter());
            _jsonOptions.Converters.Add(new TransferCompleteCallbackJsonConverter());
            _jsonOptions.Converters.Add(new TransferDisconnectCallbackJsonConverter());
            _jsonOptions.Converters.Add(new UpdateCallJsonConverter());
            _jsonOptions.Converters.Add(new UpdateCallRecordingJsonConverter());
            _jsonOptions.Converters.Add(new UpdateConferenceJsonConverter());
            _jsonOptions.Converters.Add(new UpdateConferenceMemberJsonConverter());
            _jsonOptions.Converters.Add(new VerificationDenialWebhookJsonConverter());
            _jsonOptions.Converters.Add(new VerificationRequestJsonConverter());
            _jsonOptions.Converters.Add(new VerificationUpdateRequestJsonConverter());
            _jsonOptions.Converters.Add(new VerificationWebhookJsonConverter());
            _jsonOptions.Converters.Add(new VerifyCodeRequestJsonConverter());
            _jsonOptions.Converters.Add(new VerifyCodeResponseJsonConverter());
            _jsonOptions.Converters.Add(new VoiceApiErrorJsonConverter());
            _jsonOptions.Converters.Add(new VoiceCodeResponseJsonConverter());
            _jsonOptions.Converters.Add(new WebhookSubscriptionJsonConverter());
            _jsonOptions.Converters.Add(new WebhookSubscriptionBasicAuthenticationJsonConverter());
            _jsonOptions.Converters.Add(new WebhookSubscriptionRequestSchemaJsonConverter());
            _jsonOptions.Converters.Add(new WebhookSubscriptionTypeEnumJsonConverter());
            _jsonOptions.Converters.Add(new WebhookSubscriptionTypeEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new WebhookSubscriptionsListBodyJsonConverter());
            JsonSerializerOptionsProvider jsonSerializerOptionsProvider = new JsonSerializerOptionsProvider(_jsonOptions);
            _services.AddSingleton(jsonSerializerOptionsProvider);
            _services.AddSingleton<IApiFactory, ApiFactory>();
            _services.AddSingleton<CallsApiEvents>();
            _services.AddSingleton<ConferencesApiEvents>();
            _services.AddSingleton<EndpointsApiEvents>();
            _services.AddSingleton<MFAApiEvents>();
            _services.AddSingleton<MediaApiEvents>();
            _services.AddSingleton<MessagesApiEvents>();
            _services.AddSingleton<MultiChannelApiEvents>();
            _services.AddSingleton<PhoneNumberLookupApiEvents>();
            _services.AddSingleton<RecordingsApiEvents>();
            _services.AddSingleton<StatisticsApiEvents>();
            _services.AddSingleton<TollFreeVerificationApiEvents>();
            _services.AddSingleton<TranscriptionsApiEvents>();
        }

        /// <summary>
        /// Configures the HttpClients.
        /// </summary>
        /// <param name="client"></param>
        /// <param name="builder"></param>
        /// <returns></returns>
        public HostConfiguration AddBandwidthHttpClients
        (
            Action<HttpClient> client = null, Action<IHttpClientBuilder> builder = null)
        {
            if (client == null)
                client = c => c.BaseAddress = new Uri(ClientUtils.BASE_ADDRESS);

            List<IHttpClientBuilder> builders = new List<IHttpClientBuilder>();

            builders.Add(_services.AddHttpClient<ICallsApi, CallsApi>(client));
            builders.Add(_services.AddHttpClient<IConferencesApi, ConferencesApi>(client));
            builders.Add(_services.AddHttpClient<IEndpointsApi, EndpointsApi>(client));
            builders.Add(_services.AddHttpClient<IMFAApi, MFAApi>(client));
            builders.Add(_services.AddHttpClient<IMediaApi, MediaApi>(client));
            builders.Add(_services.AddHttpClient<IMessagesApi, MessagesApi>(client));
            builders.Add(_services.AddHttpClient<IMultiChannelApi, MultiChannelApi>(client));
            builders.Add(_services.AddHttpClient<IPhoneNumberLookupApi, PhoneNumberLookupApi>(client));
            builders.Add(_services.AddHttpClient<IRecordingsApi, RecordingsApi>(client));
            builders.Add(_services.AddHttpClient<IStatisticsApi, StatisticsApi>(client));
            builders.Add(_services.AddHttpClient<ITollFreeVerificationApi, TollFreeVerificationApi>(client));
            builders.Add(_services.AddHttpClient<ITranscriptionsApi, TranscriptionsApi>(client));
            
            if (builder != null)
                foreach (IHttpClientBuilder instance in builders)
                    builder(instance);

            HttpClientsAdded = true;

            return this;
        }

        /// <summary>
        /// Configures the JsonSerializerSettings
        /// </summary>
        /// <param name="options"></param>
        /// <returns></returns>
        public HostConfiguration ConfigureJsonOptions(Action<JsonSerializerOptions> options)
        {
            options(_jsonOptions);

            return this;
        }

        /// <summary>
        /// Adds tokens to your IServiceCollection
        /// </summary>
        /// <typeparam name="TTokenBase"></typeparam>
        /// <param name="token"></param>
        /// <returns></returns>
        public HostConfiguration AddTokens<TTokenBase>(TTokenBase token) where TTokenBase : TokenBase
        {
            return AddTokens(new TTokenBase[]{ token });
        }

        /// <summary>
        /// Adds tokens to your IServiceCollection
        /// </summary>
        /// <typeparam name="TTokenBase"></typeparam>
        /// <param name="tokens"></param>
        /// <returns></returns>
        public HostConfiguration AddTokens<TTokenBase>(IEnumerable<TTokenBase> tokens) where TTokenBase : TokenBase
        {
            TokenContainer<TTokenBase> container = new TokenContainer<TTokenBase>(tokens);
            _services.AddSingleton(services => container);

            return this;
        }

        /// <summary>
        /// Adds a token provider to your IServiceCollection
        /// </summary>
        /// <typeparam name="TTokenProvider"></typeparam>
        /// <typeparam name="TTokenBase"></typeparam>
        /// <returns></returns>
        public HostConfiguration UseProvider<TTokenProvider, TTokenBase>() 
            where TTokenProvider : TokenProvider<TTokenBase>
            where TTokenBase : TokenBase
        {
            _services.AddSingleton<TTokenProvider>();
            _services.AddSingleton<TokenProvider<TTokenBase>>(services => services.GetRequiredService<TTokenProvider>());

            return this;
        }
    }
}
